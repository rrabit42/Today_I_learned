# FIDO  
패스워드 없는 인증 기술  

## Background: 인증 방식 분류  

### 1. 지식 기반  
사용자와 서버가 미리 설정하여 공유한 비밀정보를 기반으로 사용자 인증  
장점: 별도의 하드 웨어 필요 X -> 비용이 아주 적음, 사용자 편의성 높음  
단점: 인증 강도가 다른 방식에 비해 낮아 보안 취약점이 가장 많이 발견됨  

ex) **패스워드 인증** : 타인에게 노출 시 바로 시스템 보안이 무력화됨  

#### 정적 방식(shared secret)  
현재 가장 널리 사용되고 있음  
사용자 회원 등록과정 등에서 사용자가 서버에 자신의 인증 정보를 미리 입력하고  
회원 인증 과정에서 미리 설정한 인증 정보를 입력하는 방식  

사용자가 비밀번호를 기억해내지 못할 경우(fall-back)을 대비하여 설정한 힌트 정보도 정적 지식 기반 인증 방식  

#### 동적 방식  
사용자의 신원을 확인하는 지식 기반 인증 방식 중 가장 높은 검증 강도를 제공  
사용자와 서버 간 사전 접촉 없이 질문을 통해 사용자의 신원을 확인  
즉, 서버는 사용자에 대한 공개된 정보, 수집된 마케팅 데이터 또는 신용보고정보 등을 이용하여 즉석에서 질문을 사용자에게 제시  

### 2. 소유 기반  
인증 토큰을 소유하고, 이를 기반으로 사용자를 인증  
장점: 사용자가 토큰을 사용하고 있어야 하기 때문에, 지식기반 방식의 인증방법보다 보안성이 높음.  
단점: 인증 시스템 구축이 어려움, 사용자가 서비스 신청을 위해 CA(Certification Authority) 또는 RA(Registration Authority)와 최소 1번의 대면으로 본인 확인이 필요 + 늘 소유하고 있어야 함 -> 편리성 낮음  

토큰의 구성 방식은 두가지로 분류  
* 하드웨어 형태 토큰: OTP(One Time Password) 단말기  
사용자가 물리적인 형태의 토큰을 소유를 하고 있어야 하기 때문에 휴대성과 편리성이 낮음  

* 소프트웨어 형태 토큰: 공인인증서(X.509). 
하드웨어의 낮은 휴대성과 편리성 보완, 논리적인 형태로 저장 매체에 저장이 되어 있어서 유출의 위험이 높음  

### 3. 생체 기반  
사용자가 가지고 있는 고유한 형태의 신체 구조 또는 사용자가 신체를 이용하여 행동했을 때 나타나는 행동 결과를 기반으로 사용자를 인증하는 방법  
장점: 사용자가 특별하게 별도의 인증 토큰을 소유하지 않아도 되고, 별도로 알고 있어야 하는 정보가 없음 -> 편리성 높음, 사용자 본인의 신체의 고유한 정보들을 사용 -> 보안성 높음
단점: 시스템 구축 및 관리가 힘듬  
생체 구조를 활용한 특징들을 이용하여 시스템을 구축하려면, 생체 구조로부터 일련의 패턴을 분석해야 하는데 이를 위한 연구가 어려움 + 패턴화한 정보를 활용하기 위한 시스템을 구축하는데 많은 비용 소비  
사용자의 쉽게 변경할 수 없는 고유한 형태의 생체 구조를 사용 -> 사용자의 고유 생체 정보에 대한 패턴값의 비밀성과 무결성이 훼손되었을 경우에는 큰 문제 발생 가능  

#### 생체적 특징 방식  
사용자 신체 구조를 활용  
ex) 얼굴 인식, 홍채 인식, 지문 인식, 정맥 인식, 심박도, 심전도 인식 등  

#### 행동적 특징 방식  
사용자가 신체를 활용하여 어떠한 행위를 하였을 때 도출되는 정보들을 활용  
ex) 목소리 인식, 타이핑 리듬 인식, 서명 패턴 인식, 서명 압력 인식 등  

## 다중 요소 인증  
* 사용자가 특별한 정보를 알고 있는지를 확인하는 지식 요소(knowledge factor, something the user knows, secret)  
* 사용자가 특별한 하드웨어를 가지고 있는지를 확인하는 소유 요소(possession factor, something the user has, object)  
* 사용자가 생체적으로 특별한 특성을 보유하고 있는지를 확인하는 내재요소(inherence factor, seomthing the user is, biometry)  

2가지 이상의 인증 요소로 인증하는 방식  
동일한 방식의 인증 기법을 2가지 이상 이용하는 경우는 다중 요소 인증에 해당되지 않음  

사용자 신분을 위장하려는 공격자의 위협을 감소 시키긴 하지만,  
여전히 MITM, MITB 공격에 취약점 가지고 있음  

## FIDO 기반 인증 기술  
인증 기술의 가장 큰 문제점: 패스워드 이용, 온라인 인증 또는 디바이스 인증에 뚜렷한 대안이 없음  
-> 스마트폰과 같은 디바이스들이 등장하면서 바뀜  
-> 숫자로된 PIN 입력, 패턴 등으로 사용자 인증 수행  
-> 점차 발전; 음성 인식, 지문 인식, USIM(Universal Subscriber Identity Module) 기반 인증 기술  
-> 사용자는 간편하지만 보안 강도는 높은 인증을 적용  

FIDO는 이러한 스마트 디바이스에서 사용하는 인증 기술을 온라인에도 적용하는 것은 어떨까 하는 아이디어  
즉, 특정 웹 서버에 인증하기 위해 패스워드를 사용하지 않고 디바이스 인증을 이용 -> 사용자는 편리, 웹서비스는 필요에 따라 인증 기술 선택할 수 있음  

* FIDO 표준이 제안하는 두가지 프로토콜  
#### UAF(Universal Authentication Framework)  
사용자의 디바이스에서 제공하는 인증 방법을 온라인 서비스와 연동하여 사용자를 인증하는 기술  

#### U2F(Universal 2nd Factor)  
기존 패스워드를 사용하는 온라인 서비스에서 두번째 인증요소로 강한 인증을 사용자 로그인 시에 추가할 수 있는 프로토콜  

#### FIDO 2.0  
Web browser를 사용하는 Web 환경에서 사용할 수 있도록, UAF와 U2F를 통합 확장  
즉, 모바일 뿐만 아니라 PC를 포함한 모든 온라인 환경에서 사용할 수 있도록, 단말기에 종속되지 않고 공통으로 사용할 수 있는 인증 표준과 플랫폼 구현  
이를 지원하기 위해 Web Authn 표준이 제안되어짐  

* FIDO 구성 요소  
<img width="425" alt="image" src="https://user-images.githubusercontent.com/46364778/215682150-0faf08be-231d-4500-a9af-62818ca07a80.png">  

클라이언트, 서버, 두 개체 간에 주고 받는 프로토콜  
FIDO 클라이언트: FIDO 인증 토큰과 인증 토큰 API라는 인증 토큰 추상화 단계에서 연동하는 역할  
API만 준용하면 어떤 종류의 인증 토큰이라도 FIDO 클라이언트에서 사용할 수 있음  
클라이언트의 다른 역할은 FIDO 서버와 프로토콜을 송수신하며 등록, 인증, 조회 서비스 제공  

FIDO 서버: 클라이언트와 UAF 프로토콜을 주고 받아 서비스를 제공하는 것이 주 역할  
서버는 클라이언트가 제시하는 인증 토큰을 검증하고 등록하는 과정 수행  
등록된 인증 토큰을 관리하여 사용자가 인증을 요청할 때 평가하는 작업 수행  

FIDO 프로토콜: 사용자 디바이스와 서버 간에 세가지 메세지 전달  
(1) 등록 메세지; 사용자 디바이스에 있는 인증 토큰을 조회하고 검증하여 등록하는 기능  
(2) 인증 메세지; 도전(challenge, request 형태)과 응답(response) 형태로 이루어진 프로토콜을 수행하여 사용자 인증  
(3) 안전 거래 확인 메세지; 특정 거래에 대해 서버가 클라이언트에게 전자서명으로 거래 내용을 확인하는 기능 수행  

### FIDO 프로토콜  
Fast IDentity Online

#### Registration  
사용자의 인증 토큰과 공개키를 등록하는 과정  
<img width="453" alt="image" src="https://user-images.githubusercontent.com/46364778/215683295-529b22c9-a499-43c5-9f3e-d094f938af82.png">  

FIDO 서버는 사용작 선택한 인증 토큰과 공개키를 등록하여 나중에 인증 또는 전자서명 검증에 사용  

#### Authentication  
<img width="440" alt="image" src="https://user-images.githubusercontent.com/46364778/215683443-5668de96-5a81-491d-84f7-5be14366592c.png">  

FIDO 서버는 클라이언트에 인증에 필요한 Challenge 값인 **난수** 와 사용 가능한 인증 토큰을 보내 인증 요청  
클라이언트에서는 디바이스에서 등록된 인증 토큰으로 사용자를 인증하고  
서버에 등록된 공개키의 쌍인 비밀키를 복호화하여 서버에서 보내온 요청 메세지에 대한 응답으로 전자서명을 생성하여 서버로 보냄  
서버는 클라이언트가 보내온 전자 서명을 등록된 공개키로 검증하여 사용자를 인증  

FIDO는 사용자가 인증하는 인증 토큰 부분과 클라이언트와 서버가 사용하는 인증 프로토콜을 분리하여 패스워드 사용 없이 인증 방식을 다양화했다는 의의  

## 출처  
* https://ettrends.etri.re.kr/ettrends/148/0905001970/0905001970.html  
* https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=aepkoreanet&logNo=221510427704  
