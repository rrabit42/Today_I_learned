# Javascript 모듈  
ECMAScript2015 즉 ES6가 배포되기 전에는 ECMAScript에 모듈이라는 개념이 존재X => 규모가 큰 프로젝트일수록 모듈 개념이 없어서 의존성을 관리하기 매우 불편  
모듈 간 의존성을 관리하기 위해(표준은 아니지만) AMD, CommonJS와 같은 여러 모듈 개념을 만들었고,  
각 모듈 방식을 토대로 여러 파일을 한 개, 혹은 몇 개의 파일로 합쳐주는 requireJS, Browserify, Webpack등의 번들러가 개발됨.  

한동안 사람들은 번들러들을 통해 모듈 개발을 계속했고 모듈 개발 방식이 널리 퍼졌다. 하지만 2015년에 ES6 명세가 등장하면서 모듈 개념이 정식으로 ECMAScript 명세에 수록됨  
ES6를 지원하는 환경이 많지 않을 당시에 **Babel**이 등장하여 ES6 코드를 ES5 코드로, ES 모듈을 CommonJS로 트랜스파일 해주면서 표준인 ES 모듈 개발 환경또한 이미 나와 있는 모듈 방식들을 대체감.  
**Webpack**은 풍부한 plugin을 통해 번들러 기능 외에 Task Runner인Grunt, gulp 같은 다양한 기능들도 수행할 수 있어서 많이 사용되고 있었지만, ES6가 출시된 당시의 Webpack1은 ES6 문법을 처리하지 못함.  
하지만 Babel을 이용해 CommonJS 모듈 형태로 변환된 코드는 번들링 할 수 있었으므로 **Babel loader + Webpack**을 쓰는 패턴이 많이 사용됨.  

Webpack1으로 개발된 라이브러리들이 지금까지도 잘 동작하고 있고, 현재 유명한 프런트 엔드 프로젝트들도 Babel이나 Webpack을 사용하고 있다.  
최근에 개발된 프로젝트가 ES 모듈을 사용하더라도 필요에 따라 CommonJS 모듈 방식으로 내보내진 모듈을 사용하기도 있으므로, 여러 모듈 방식의 코드들이 웹 프런트 엔드 생태계에 공존할 수 있었다.  


## ES 모듈과 CommonJS 모듈의 차이  
### CommonJS  
#### 내보내기  
1. 프로퍼티로 추가하여 내보내기
```
module.exports.crop = function() {};
module.exports.rotate = function() {};
```  

2. module.export 객체를 치환하여 내보내기  
```
module.exports = {
  crop: function() {},
  rotate: function() {}
};
```  

#### 가져오기  
* require() 함수의 반환값 사용  
```
var filter = require('filter');

filter.crop();
filter.rotate();
* CommonJS  
```  

### ES 모듈  
#### 내보내기  
1. 이름 붙인 내보내기(Name export)  
```
// filter.js
export const crop = function() {};
export const rotate = function() {};
// graphics.js
import {crop, rotate} from './filter';

crop();

rotate();
``` 
한 파일에서 여러 개의 객체를 내보낼 수 있고, import 문으로 그 모듈을 가져올 때는 반드시 export 문에서 정의한 모듈 이름으로 가져와야함.(물론 as 키워드로 가져온 이름 바꿀 수 있음)  

2. 기본값 내보내기  
```
// filters.js
const filterNames = ['retro', 'sharpen'];

export default filterNames;
// command
import filters from './filters'; 

filters[0]; // 'retro'
filters[1]; // 'sharpen'
```  
객체에 이름 정의 X. 한 모듈 파일 당 한 번만 사용 가능  

#### 가져오기  
```
import {add, average} from 'mathmatics'; // 이름 붙인 가져오기
import TextBox from 'textBox';           // 기본값 가져오기
//...
```  
이름 붙인 가져오기는 중괄호 안에 가져올 모듈 파일에 정의된 객체의 이름을 작성해서 가져오기.  
기본값 가져오기는 중괄호 필요 없이 그냥 이름 사용  

## 두 모듈 같이 사용할 수 있는 방법  
두 모듈의 가져오기/내보내기 방식이 달라서 서로 다른 타입의 모듈을 그대로 가져와서 사용하려면 추가적인 처리를 해야 하거나, 문제가 생김.  
다양한 도구들이 어떻게 두 모듈을 함꼐 사용할 수 있도록 처리하는지 살펴보자.  

### Webpack은 어떻게 처리할까?  



## 출처  
* https://ui.toast.com/weekly-pick/ko_20190418  
* 
